"use strict";!function(e,t){var a,n,o=!0;function r(e,t){var a=[],n=moment(e.start.toUTCString());return t||a.push("<span>"+n.format("HH:mm")+"</span> "),e.isPrivate?(a.push('<span class="bx bxs-lock-alt font-size-small align-middle"></span>'),a.push(" Private")):(e.isReadOnly?a.push('<span class="bx bx-block font-size-small align-middle"></span>'):e.recurrenceRule?a.push('<span class="bx bx-repeat font-size-small align-middle"></span>'):e.attendees.length?a.push('<span class="bx bxs-user font-size-small align-middle"></span>'):e.location&&a.push('<span class="bx bxs-map font-size-small align-middle"></span>'),a.push(" "+e.title)),a.join("")}function l(e){var t=$(e.target).closest('[role="menuitem"]')[0],n=g(t),o=a.getOptions(),r="";switch(n){case"toggle-daily":r="day";break;case"toggle-weekly":r="week";break;case"toggle-monthly":o.month.visibleWeeksCount=0,o.month.isAlways6Week=!1,r="month";break;case"toggle-weeks2":o.month.visibleWeeksCount=2,r="month";break;case"toggle-weeks3":o.month.visibleWeeksCount=3,r="month";break;case"toggle-narrow-weekend":o.month.narrowWeekend=!o.month.narrowWeekend,o.week.narrowWeekend=!o.week.narrowWeekend,r=a.getViewName(),t.querySelector("input").checked=o.month.narrowWeekend;break;case"toggle-start-day-1":o.month.startDayOfWeek=o.month.startDayOfWeek?0:1,o.week.startDayOfWeek=o.week.startDayOfWeek?0:1,r=a.getViewName(),t.querySelector("input").checked=o.month.startDayOfWeek;break;case"toggle-workweek":o.month.workweek=!o.month.workweek,o.week.workweek=!o.week.workweek,r=a.getViewName(),t.querySelector("input").checked=!o.month.workweek}a.setOptions(o,!0),a.changeView(r,!0),u(),m(),h()}function c(e){switch(g(e.target)){case"move-prev":a.prev();break;case"move-next":a.next();break;case"move-today":a.today();break;default:return}m(),h()}function s(e){var t=e.start?new Date(e.start.getTime()):new Date,n=e.end?new Date(e.end.getTime()):moment().add(1,"hours").toDate();o&&a.openCreationPopup({start:t,end:n})}function d(e){var t=e.target.value,a=e.target.checked,n=document.querySelector(".sidebar-calendars-item input"),o=Array.prototype.slice.call(document.querySelectorAll("#calendarList input")),r=!0;"all"===t?(r=a,o.forEach(function(e){var t=e.parentNode;e.checked=a,t.style.backgroundColor=a?t.style.borderColor:"transparent"}),CalendarList.forEach(function(e){e.checked=a})):(findCalendar(t).checked=a,r=o.every(function(e){return e.checked}),n.checked=!!r),i()}function i(){var e=Array.prototype.slice.call(document.querySelectorAll("#calendarList input"));CalendarList.forEach(function(e){a.toggleSchedules(e.id,!e.checked,!1)}),a.render(!0),e.forEach(function(e){var t=e.nextElementSibling;t.style.backgroundColor=e.checked?t.style.borderColor:"transparent"})}function u(){var e,t=document.getElementById("calendarTypeName"),n=document.getElementById("calendarTypeIcon"),o=a.getOptions(),r=a.getViewName();"day"===r?(r="Daily",e="bx bx-calendar-alt mr-25"):"week"===r?(r="Weekly",e="bx bx-calendar-event mr-25"):2===o.month.visibleWeeksCount?(r="2 weeks",e="bx bx-calendar-check mr-25"):3===o.month.visibleWeeksCount?(r="3 weeks",e="bx bx-calendar-check mr-25"):(r="Monthly",e="bx bx-calendar mr-25"),t.innerHTML=r,n.className=e}function m(){var e=document.getElementById("renderRange"),t=a.getOptions(),n=a.getViewName(),o=[];"day"===n?o.push(moment(a.getDate().getTime()).format("YYYY-MM-DD")):"month"===n&&(!t.month.visibleWeeksCount||t.month.visibleWeeksCount>4)?o.push(moment(a.getDate().getTime()).format("YYYY-MM")):(o.push(moment(a.getDateRangeStart().getTime()).format("YYYY-MM-DD")),o.push("-"),o.push(moment(a.getDateRangeEnd().getTime()).format(" MM.DD"))),e.innerHTML=o.join("")}function h(){a.clear(),generateSchedule(a.getViewName(),a.getDateRangeStart(),a.getDateRangeEnd()),a.createSchedules(ScheduleList),i()}function g(e){return e.dataset?e.dataset.action:e.getAttribute("data-action")}(a=new t("#calendar",{defaultView:"month",useCreationPopup:o,useDetailPopup:!0,calendars:CalendarList,theme:{"common.border":"1px solid #DFE3E7","common.backgroundColor":"white","common.holiday.color":"#FF5B5C","common.saturday.color":"#304156","common.dayname.color":"#304156","month.dayname.borderLeft":"1px solid transparent","month.dayname.fontSize":"1rem","week.dayGridSchedule.borderRadius":"4px","week.timegridSchedule.borderRadius":"4px"},template:{milestone:function(e){return'<span class="bx bx-flag align-middle"></span> <span style="background-color: '+e.bgColor+'">'+e.title+"</span>"},allday:function(e){return r(e,!0)},time:function(e){return r(e,!1)}}})).on({clickSchedule:function(e){$(".tui-full-calendar-popup-top-line").css("background-color",e.calendar.color),$(".tui-full-calendar-calendar-dot").css("background-color",e.calendar.borderColor)},beforeCreateSchedule:function(e){!function(e){var t=e.calendar||findCalendar(e.calendarId),n={id:String(chance.guid()),title:e.title,isAllDay:e.isAllDay,start:e.start,end:e.end,category:e.isAllDay?"allday":"time",dueDateClass:"",color:t.color,bgColor:t.bgColor,dragBgColor:t.bgColor,borderColor:t.borderColor,location:e.location,raw:{class:e.raw.class},state:e.state};t&&(n.calendarId=t.id,n.color=t.color,n.bgColor=t.bgColor,n.borderColor=t.borderColor);a.createSchedules([n]),i()}(e)},beforeUpdateSchedule:function(e){e.schedule.start=e.start,e.schedule.end=e.end,a.updateSchedule(e.schedule.id,e.schedule.calendarId,e.schedule)},beforeDeleteSchedule:function(e){console.log("beforeDeleteSchedule",e),a.deleteSchedule(e.schedule.id,e.schedule.calendarId)},clickTimezonesCollapseBtn:function(e){return e?a.setTheme({"week.daygridLeft.width":"77px","week.timegridLeft.width":"77px"}):a.setTheme({"week.daygridLeft.width":"60px","week.timegridLeft.width":"60px"}),!0}}),n=tui.util.throttle(function(){a.render()},50),e.cal=a,u(),m(),h(),$(".menu-navigation").on("click",c),$('.dropdown-menu [role="menuitem"]').on("click",l),$(".sidebar-calendars").on("change",d),$(".sidebar-new-schedule-btn").on("click",s),e.addEventListener("resize",n)}(window,tui.Calendar),function(){var e=document.getElementById("calendarList"),t=[];CalendarList.forEach(function(e){t.push('<div class="sidebar-calendars-item"><label><input type="checkbox" class="tui-full-calendar-checkbox-round" value="'+e.id+'" checked><span style="border-color: '+e.borderColor+"; background-color: "+e.borderColor+';"></span><span>'+e.name+"</span></label></div>")}),e.innerHTML=t.join("\n")}(),$(document).ready(function(){if($(".sidebar").length>0)new PerfectScrollbar(".sidebar",{wheelPropagation:!1});$(".sidebar-toggle-btn").on("click",function(){$(".sidebar").toggleClass("show"),$(".app-content-overlay").toggleClass("show")}),$(".app-content-overlay, .sidebar-new-schedule-btn").on("click",function(){$(".sidebar").removeClass("show"),$(".app-content-overlay").removeClass("show")})}),$(window).on("resize",function(){$(window).width()<991&&($(".sidebar").removeClass("show"),$(".app-content-overlay").removeClass("show"))});
